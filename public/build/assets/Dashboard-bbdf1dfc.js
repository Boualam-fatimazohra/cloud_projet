import{l as p,z as b,o as i,c as R,w as $,e,t as o,b as c,q as x,L as S,F as g,s as O,v as V,x as F,n as w,C as L,d as T}from"./app-286e29ed.js";import z from"./UserLayouts-16a92e64.js";import"./index-419f3630.js";import"./Header-18568074.js";import"./Footer-fa580ed6.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                             */const N={class:"max-w-screen-xl mx-auto p-6 bg-gray-50"},U={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},q={class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white"},I=e("div",{class:"text-sm font-medium opacity-80"},"Total Commandes",-1),Q={class:"mt-2 flex items-baseline"},G={class:"text-3xl font-bold"},H=e("span",{class:"ml-2 text-sm bg-blue-400/30 px-2 py-1 rounded-full"},"+12%",-1),J={class:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},K=e("div",{class:"text-sm font-medium opacity-80"},"Revenu Total",-1),W={class:"mt-2 flex items-baseline"},X={class:"text-3xl font-bold"},Y=e("span",{class:"ml-2 text-sm bg-green-400/30 px-2 py-1 rounded-full"},"+8%",-1),Z={class:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},ee=e("div",{class:"text-sm font-medium opacity-80"},"Panier Moyen",-1),te={class:"mt-2 flex items-baseline"},se={class:"text-3xl font-bold"},oe=e("span",{class:"ml-2 text-sm bg-purple-400/30 px-2 py-1 rounded-full"},"+5%",-1),ae={class:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white"},re=e("div",{class:"text-sm font-medium opacity-80"},"Commandes en Attente",-1),ne={class:"mt-2 flex items-baseline"},de={class:"text-3xl font-bold"},le={class:"ml-2 text-sm bg-orange-400/30 px-2 py-1 rounded-full"},ie={class:"mb-8 bg-white rounded-xl shadow-sm p-6"},ce=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Revenus par période",-1),ue={class:"grid grid-cols-3 gap-4"},_e={class:"p-4 bg-gray-50 rounded-lg"},me=e("div",{class:"text-sm text-gray-500"},"Aujourd'hui",-1),he={class:"text-xl font-semibold text-gray-900"},pe={class:"p-4 bg-gray-50 rounded-lg"},xe=e("div",{class:"text-sm text-gray-500"},"Cette semaine",-1),ge={class:"text-xl font-semibold text-gray-900"},ve={class:"p-4 bg-gray-50 rounded-lg"},ye=e("div",{class:"text-sm text-gray-500"},"Ce mois",-1),fe={class:"text-xl font-semibold text-gray-900"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},we={class:"col-span-2 bg-white rounded-xl shadow-sm p-6"},ke=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Produits Populaires",-1),Ce={class:"space-y-4"},De={class:"text-sm text-gray-600"},Oe={class:"flex items-center space-x-3"},Pe={class:"w-32 bg-gray-100 rounded-full h-2"},Me={class:"text-sm font-medium text-gray-900"},Se={class:"bg-white rounded-xl shadow-sm p-6"},je=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Statut des Commandes",-1),Be={class:"space-y-4"},Ae={class:"flex items-center justify-between"},Ee=e("span",{class:"text-sm text-gray-600"},"Complétées",-1),Re={class:"px-3 py-1 rounded-full text-sm bg-green-50 text-green-700"},$e={class:"flex items-center justify-between"},Ve=e("span",{class:"text-sm text-gray-600"},"En attente",-1),Fe={class:"px-3 py-1 rounded-full text-sm bg-yellow-50 text-yellow-700"},Le={class:"pt-4"},Te={class:"w-full bg-gray-100 rounded-full h-3"},ze={class:"mt-2 text-xs text-gray-500 text-right"},Ne={class:"bg-white rounded-xl shadow-sm p-6 mb-8"},Ue={class:"flex flex-wrap gap-4 items-center"},qe={class:"flex-1"},Ie=e("option",{value:"all"},"Tous les statuts",-1),Qe=e("option",{value:"pending"},"En attente",-1),Ge=e("option",{value:"completed"},"Complété",-1),He=[Ie,Qe,Ge],Je={class:"flex space-x-2"},Ke=["onClick"],We={class:"space-y-4"},Xe=["onClick"],Ye={class:"flex items-center space-x-6"},Ze={class:"h-12 w-12 rounded-xl bg-blue-50 flex items-center justify-center"},et={class:"text-blue-600 font-medium"},tt={class:"font-medium text-gray-900"},st={class:"text-sm text-gray-500"},ot={class:"flex items-center space-x-6"},at={class:"text-right"},rt={class:"text-sm font-medium text-gray-900"},nt={class:"text-xs text-gray-500"},dt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),lt=[dt],it={class:"border-t border-gray-100"},ct={class:"overflow-x-auto"},ut={class:"w-full"},_t=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Produit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Marque"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1),mt={class:"divide-y divide-gray-200"},ht={class:"px-6 py-4 whitespace-nowrap"},pt={class:"flex items-center"},xt=e("div",{class:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center mr-3"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1),gt={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700"},ft={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-500"},wt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900"},Ct=e("td",{class:"px-6 py-4 whitespace-nowrap text-right"},[e("button",{class:"text-sm text-blue-600 hover:text-blue-700 font-medium"}," Voir détails ")],-1),Dt={key:0,class:"mt-6 flex justify-center"},Ot={class:"flex items-center space-x-2"},Pt=["disabled"],Mt=["onClick"],St=["disabled"],P=10,Ft={__name:"Dashboard",props:{orders:Array},setup(j){const l=j,v=p({}),k=p("today"),h=p(""),y=p("all"),u=p(1),r=b(()=>{const n=(()=>{const t={};return l.orders.forEach(s=>{s.order_items.forEach(a=>{t[a.product.title]||(t[a.product.title]=0),t[a.product.title]++})}),Object.entries(t).sort(([,s],[,a])=>a-s).slice(0,5)})(),d={today:l.orders.filter(t=>new Date(t.created_at).toDateString()===new Date().toDateString()).reduce((t,s)=>t+m(s),0),week:l.orders.filter(t=>{const s=new Date(t.created_at),a=new Date;return a.setDate(a.getDate()-7),s>=a}).reduce((t,s)=>t+m(s),0),month:l.orders.filter(t=>{const s=new Date(t.created_at),a=new Date;return a.setMonth(a.getMonth()-1),s>=a}).reduce((t,s)=>t+m(s),0)};return{totalOrders:l.orders.length,totalRevenue:l.orders.reduce((t,s)=>t+m(s),0),averageOrderValue:l.orders.length?(l.orders.reduce((t,s)=>t+m(s),0)/l.orders.length).toFixed(2):0,pendingOrders:l.orders.filter(t=>t.status==="pending").length,completedOrders:l.orders.filter(t=>t.status==="completed").length,topProducts:n,revenueByPeriod:d}}),m=n=>n.order_items.reduce((d,t)=>d+t.product.price,0),M=b(()=>l.orders.filter(n=>{const d=h.value===""||n.id.toString().includes(h.value)||n.order_items.some(a=>a.product.title.toLowerCase().includes(h.value.toLowerCase())),t=y.value==="all"||n.status===y.value,s=(()=>{const a=new Date(n.created_at),E=new Date;switch(k.value){case"today":return a.toDateString()===E.toDateString();case"week":const C=new Date;return C.setDate(C.getDate()-7),a>=C;case"month":const D=new Date;return D.setMonth(D.getMonth()-1),a>=D;default:return!0}})();return d&&t&&s})),B=b(()=>{const n=(u.value-1)*P;return M.value.slice(n,n+P)}),f=b(()=>Math.ceil(M.value.length/P)),A=n=>new Date(n).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n);return(n,d)=>(i(),R(z,null,{default:$(()=>[e("div",N,[e("div",U,[e("div",q,[I,e("div",Q,[e("span",G,o(r.value.totalOrders),1),H])]),e("div",J,[K,e("div",W,[e("span",X,o(_(r.value.totalRevenue)),1),Y])]),e("div",Z,[ee,e("div",te,[e("span",se,o(_(r.value.averageOrderValue)),1),oe])]),e("div",ae,[re,e("div",ne,[e("span",de,o(r.value.pendingOrders),1),e("span",le,o(r.value.pendingOrders)+" nouvelles",1)])])]),e("div",ie,[ce,e("div",ue,[e("div",_e,[me,e("div",he,o(_(r.value.revenueByPeriod.today)),1)]),e("div",pe,[xe,e("div",ge,o(_(r.value.revenueByPeriod.week)),1)]),e("div",ve,[ye,e("div",fe,o(_(r.value.revenueByPeriod.month)),1)])])]),e("div",be,[e("div",we,[ke,e("div",Ce,[(i(!0),c(g,null,x(r.value.topProducts,([t,s])=>(i(),c("div",{key:t,class:"flex items-center justify-between"},[e("span",De,o(t),1),e("div",Oe,[e("div",Pe,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:S(`width: ${s/r.value.topProducts[0][1]*100}%`)},null,4)]),e("span",Me,o(s)+" vendus",1)])]))),128))])]),e("div",Se,[je,e("div",Be,[e("div",Ae,[Ee,e("span",Re,o(r.value.completedOrders),1)]),e("div",$e,[Ve,e("span",Fe,o(r.value.pendingOrders),1)]),e("div",Le,[e("div",Te,[e("div",{class:"bg-green-500 h-3 rounded-full",style:S(`width: ${r.value.completedOrders/r.value.totalOrders*100}%`)},null,4)]),e("div",ze,o(Math.round(r.value.completedOrders/r.value.totalOrders*100))+"% complétées ",1)])])])]),e("div",Ne,[e("div",Ue,[e("div",qe,[O(e("input",{"onUpdate:modelValue":d[0]||(d[0]=t=>h.value=t),type:"text",placeholder:"Rechercher une commande...",class:"w-full px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[V,h.value]])]),O(e("select",{"onUpdate:modelValue":d[1]||(d[1]=t=>y.value=t),class:"px-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},He,512),[[F,y.value]]),e("div",Je,[(i(),c(g,null,x(["today","week","month"],t=>e("button",{key:t,onClick:s=>k.value=t,class:w(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",k.value===t?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},o(t==="today"?"Aujourd'hui":t==="week"?"Cette semaine":"Ce mois"),11,Ke)),64))])])]),e("div",We,[(i(!0),c(g,null,x(B.value,t=>(i(),c("div",{key:t.id,class:"bg-white rounded-xl shadow-sm border border-gray-100 hover:border-blue-100 transition-colors"},[e("div",{onClick:s=>v.value[t.id]=!v.value[t.id],class:"p-6 flex items-center justify-between cursor-pointer"},[e("div",Ye,[e("div",Ze,[e("span",et,"#"+o(t.id),1)]),e("div",null,[e("div",tt," Commande #"+o(t.id),1),e("div",st,o(A(t.created_at)),1)]),e("div",{class:w(["px-3 py-1 rounded-full text-xs font-medium",t.status==="completed"?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"])},o(t.status==="completed"?"Complété":"En cours"),3)]),e("div",ot,[e("div",at,[e("div",rt,o(_(m(t))),1),e("div",nt,o(t.order_items.length)+" articles ",1)]),(i(),c("svg",{class:w([{"transform rotate-180":v.value[t.id]},"h-5 w-5 text-gray-400 transition-transform"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},lt,2))])],8,Xe),O(e("div",it,[e("div",ct,[e("table",ut,[_t,e("tbody",mt,[(i(!0),c(g,null,x(t.order_items,s=>(i(),c("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ht,[e("div",pt,[xt,e("span",gt,o(s.product.title),1)])]),e("td",vt,[e("span",yt,o(s.product.brand_id.name),1)]),e("td",ft,[e("span",bt,o(s.product.category_id.name),1)]),e("td",wt,[e("span",kt,o(_(s.product.price)),1)]),Ct]))),128))])])])],512),[[L,v.value[t.id]&&t.order_items.length>0]])]))),128))]),f.value>1?(i(),c("div",Dt,[e("nav",Ot,[e("button",{onClick:d[2]||(d[2]=t=>u.value=Math.max(1,u.value-1)),disabled:u.value===1,class:"px-3 py-1 rounded-md bg-white border border-gray-300 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Précédent ",8,Pt),(i(!0),c(g,null,x(f.value,t=>(i(),c("button",{key:t,onClick:s=>u.value=t,class:w(["px-3 py-1 rounded-md text-sm font-medium",u.value===t?"bg-blue-500 text-white":"bg-white border border-gray-300 text-gray-500 hover:bg-gray-50"])},o(t),11,Mt))),128)),e("button",{onClick:d[3]||(d[3]=t=>u.value=Math.min(f.value,u.value+1)),disabled:u.value===f.value,class:"px-3 py-1 rounded-md bg-white border border-gray-300 text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Suivant ",8,St)])])):T("",!0)])]),_:1}))}};export{Ft as default};
